@import "tailwindcss";

@theme {
    --font-sans: var(--font-outfit);

    --color-background: hsl(var(--background));
    --color-foreground: hsl(var(--foreground));

    --color-card: hsl(var(--card));
    --color-card-foreground: hsl(var(--card-foreground));

    --color-popover: hsl(var(--popover));
    --color-popover-foreground: hsl(var(--popover-foreground));

    --color-primary: hsl(var(--primary));
    --color-primary-foreground: hsl(var(--primary-foreground));

    --color-secondary: hsl(var(--secondary));
    --color-secondary-foreground: hsl(var(--secondary-foreground));

    --color-muted: hsl(var(--muted));
    --color-muted-foreground: hsl(var(--muted-foreground));

    --color-accent: hsl(var(--accent));
    --color-accent-foreground: hsl(var(--accent-foreground));

    --color-destructive: hsl(var(--destructive));
    --color-destructive-foreground: hsl(var(--destructive-foreground));

    --color-border: hsl(var(--border));
    --color-input: hsl(var(--input));
    --color-ring: hsl(var(--ring));
}

@utility container {
    margin-inline: auto;
    padding-inline: 2rem;

    @media (width >=1400px) {
        max-width: 1400px;
    }
}

@layer base {
    :root {
        --background: 0 0% 100%;
        --foreground: 220 2% 10%;

        --card: 0 0% 100%;
        --card-foreground: 220 2% 10%;

        --popover: 0 0% 100%;
        --popover-foreground: 220 2% 10%;

        --primary: 180 70% 40%;
        /* Teal */
        --primary-foreground: 0 0% 100%;

        --secondary: 220 5% 96%;
        --secondary-foreground: 220 2% 10%;

        --muted: 220 5% 96%;
        --muted-foreground: 220 5% 45%;

        --accent: 220 5% 96%;
        --accent-foreground: 220 2% 10%;

        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 98%;

        --border: 220 5% 90%;
        --input: 220 5% 90%;
        --ring: 180 70% 40%;
    }

    .dark {
        --background: 220 2% 10%;
        --foreground: 0 0% 95%;

        --card: 220 2% 12%;
        --card-foreground: 0 0% 95%;

        --popover: 220 2% 12%;
        --popover-foreground: 0 0% 95%;

        --primary: 180 70% 40%;
        --primary-foreground: 0 0% 100%;

        --secondary: 220 2% 18%;
        --secondary-foreground: 0 0% 95%;

        --muted: 220 2% 18%;
        --muted-foreground: 220 5% 60%;

        --accent: 220 2% 18%;
        --accent-foreground: 0 0% 95%;

        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 0 0% 98%;

        --border: 220 2% 18%;
        --input: 220 2% 18%;
        --ring: 180 70% 40%;
    }

    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
        scroll-behavior: smooth;
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
    }

    html {
        scroll-padding-top: 20px;
        scroll-behavior: smooth;
    }

    /* Mobile Menu Styles */
    :root {
        --component-inactive-color: hsl(var(--muted-foreground));
        --component-bg: hsl(var(--card));
        --component-shadow: hsl(var(--border));
        --component-active-bg: hsl(var(--secondary));
        --component-line-inactive-color: hsl(var(--border));
        --component-active-color-default: hsl(var(--primary));
    }

    .dark {
        --component-inactive-color: hsl(var(--muted-foreground));
        --component-bg: hsl(var(--card));
        --component-shadow: hsl(var(--border));
        --component-active-bg: hsl(var(--secondary));
        --component-line-inactive-color: hsl(var(--muted-foreground));
        --component-active-color-default: hsl(var(--primary));
    }

    @keyframes iconBounce {
        0%, 100% {
            transform: translateY(0);
        }
        20% {
            transform: translateY(-0.3em);
        }
        40% {
            transform: translateY(0);
        }
        60% {
            transform: translateY(-0.1em);
        }
        80% {
            transform: translateY(0);
        }
    }

    .mobile-menu {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        display: flex;
        align-items: center;
        justify-content: space-around;
        background: var(--component-bg);
        border-top: 1px solid var(--component-shadow);
        padding: 0.5rem 0;
        z-index: 40;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }

    @media (min-width: 768px) {
        .mobile-menu {
            display: none;
        }
    }

    .mobile-menu__item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
        padding: 0.5rem 1rem;
        background: transparent;
        border: none;
        cursor: pointer;
        position: relative;
        transition: all 0.2s ease;
        color: var(--component-inactive-color);
        min-width: 60px;
    }

    .mobile-menu__item:hover {
        color: var(--component-active-color);
    }

    .mobile-menu__item.active {
        color: var(--component-active-color);
    }

    .mobile-menu__item.active .mobile-menu__icon {
        animation: iconBounce 0.6s ease;
    }

    .mobile-menu__icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        transition: transform 0.2s ease;
    }

    .mobile-menu__item.active .mobile-menu__icon {
        transform: scale(1.1);
    }

    .mobile-menu__icon .icon {
        width: 100%;
        height: 100%;
        stroke-width: 2;
    }

    .mobile-menu__text {
        font-size: 0.625rem;
        font-weight: 500;
        text-transform: capitalize;
        transition: all 0.2s ease;
        opacity: 0.7;
        position: relative;
    }

    .mobile-menu__text.active {
        opacity: 1;
        font-weight: 600;
    }

    .mobile-menu__item::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: var(--lineWidth, 0px);
        height: 2px;
        background: var(--component-active-color);
        border-radius: 2px 2px 0 0;
        transition: width 0.3s ease;
    }

    .mobile-menu__item.active::after {
        width: var(--lineWidth, 0px);
    }

    /* Chrome-specific fixes for input focus flicker */
    textarea:focus,
    input:focus {
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-perspective: 1000;
        perspective: 1000;
    }

    /* Prevent scroll jump flicker in Chrome */
    textarea,
    input {
        scroll-margin: 20px;
    }

    /* Fix dialog flicker */
    [role="dialog"] {
        will-change: transform, opacity;
        transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        -webkit-perspective: 1000;
        perspective: 1000;
    }

    /* Delay focus ring to prevent flicker when no scroll happens */
    /* Target containers with focus-within that have ring transitions */
    [class*="focus-within:ring"] {
        transition-delay: 0.05s;
    }
    
    /* Alternative: Use a more specific approach - add transition delay only on focus */
    div:focus-within {
        transition-delay: 0.05s;
    }

    /* Prevent Chrome autofill flicker */
    textarea:-webkit-autofill,
    textarea:-webkit-autofill:hover,
    textarea:-webkit-autofill:focus,
    textarea:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0 1000px hsl(var(--card)) inset !important;
        -webkit-text-fill-color: hsl(var(--foreground)) !important;
        transition: background-color 5000s ease-in-out 0s;
    }

    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0 1000px hsl(var(--card)) inset !important;
        -webkit-text-fill-color: hsl(var(--foreground)) !important;
        transition: background-color 5000s ease-in-out 0s;
    }

    /* Toast Styling - Design System Consistent */
    [data-sonner-toast] {
        background: hsl(var(--card)) !important;
        border: 1px solid hsl(var(--border) / 0.5) !important;
        color: hsl(var(--foreground)) !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
        border-radius: 0.5rem !important;
        padding: 1rem 1.25rem !important;
        font-family: var(--font-outfit), system-ui, -apple-system, sans-serif !important;
    }

    [data-sonner-toast][data-type="success"] {
        border-color: hsl(142, 71%, 45% / 0.5) !important;
    }

    [data-sonner-toast][data-type="error"] {
        border-color: hsl(0, 84%, 60% / 0.5) !important;
    }

    [data-sonner-toast][data-type="info"] {
        border-color: hsl(217, 91%, 60% / 0.5) !important;
    }

    [data-sonner-toast][data-type="warning"] {
        border-color: hsl(38, 92%, 50% / 0.5) !important;
    }

    [data-sonner-toast] [data-title] {
        font-size: 0.875rem !important;
        font-weight: 500 !important;
        color: hsl(var(--foreground)) !important;
        line-height: 1.25rem !important;
    }

    [data-sonner-toast] [data-description] {
        font-size: 0.75rem !important;
        color: hsl(var(--muted-foreground)) !important;
        line-height: 1rem !important;
        margin-top: 0.25rem !important;
    }

    [data-sonner-toast] [data-close-button] {
        color: hsl(var(--muted-foreground)) !important;
        background: transparent !important;
        border: none !important;
        opacity: 0.6 !important;
        transition: opacity 0.2s ease !important;
        margin: -0.5rem -0.75rem -0.5rem 0.5rem !important;
        padding: 0.5rem !important;
    }

    [data-sonner-toast] [data-close-button]:hover {
        opacity: 1 !important;
        color: hsl(var(--foreground)) !important;
    }

    [data-sonner-toast] [data-button] {
        background: hsl(var(--primary)) !important;
        color: hsl(var(--primary-foreground)) !important;
        border-radius: 0.375rem !important;
        font-size: 0.875rem !important;
        font-weight: 500 !important;
        padding: 0.5rem 1rem !important;
        transition: background-color 0.2s ease !important;
    }

    [data-sonner-toast] [data-button]:hover {
        background: hsl(var(--primary) / 0.9) !important;
    }

    [data-sonner-toast] [data-cancel] {
        background: hsl(var(--muted)) !important;
        color: hsl(var(--muted-foreground)) !important;
    }

    [data-sonner-toast] [data-cancel]:hover {
        background: hsl(var(--muted) / 0.8) !important;
    }

    /* Shiny Text Animation */
    @keyframes slideUp {
        from {
            transform: translateY(100%);
        }
        to {
            transform: translateY(0);
        }
    }

    @keyframes shine {
        0% {
            background-position: 100%;
        }
        100% {
            background-position: -100%;
        }
    }

    .animate-shine {
        animation: shine 3s linear infinite;
    }

    /* Shiny Text - Theme-aware gradient overlay */
    .shiny-text-overlay {
        background-image: linear-gradient(
            120deg,
            transparent 40%,
            rgba(0, 0, 0, 0.6) 50%,
            transparent 60%
        );
        background-size: 200% 100%;
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        pointer-events: none;
    }

    .dark .shiny-text-overlay {
        background-image: linear-gradient(
            120deg,
            transparent 40%,
            rgba(255, 255, 255, 0.9) 50%,
            transparent 60%
        );
    }

}